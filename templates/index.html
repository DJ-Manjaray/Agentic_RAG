<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medical Q&A System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <h1>Medical Q&A RAG</h1>
                </div>
                <p class="subtitle">Ask Medical related questions and get answers</p>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Query Input Section -->
            <div class="query-section card">
                <h2 class="section-title">Ask Your Medical Question</h2>
                <div class="input-group">
                    <textarea 
                        id="queryInput" 
                        class="query-input" 
                        placeholder="Example: What are the treatments for Kawasaki disease?"
                        rows="4"
                    ></textarea>
                    <button id="submitBtn" class="submit-btn">
                        <span class="btn-text">Submit Query</span>
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 2L11 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                
                <!-- Example Queries -->
                <div class="examples">
                    <p class="examples-title">Try these example queries:</p>
                    <div class="example-chips">
                        <button class="example-chip" data-query="What are the treatments for Kawasaki disease?">
                            Kawasaki disease treatments
                        </button>
                        <button class="example-chip" data-query="What are the usage of Dialysis Machine Device?">
                            Dialysis Machine usage
                        </button>
                        <button class="example-chip" data-query="What are medicines/treatment for COVID?">
                            COVID treatments
                        </button>
                    </div>
                </div>
            </div>

            <!-- Loading Indicator -->
            <div id="loadingIndicator" class="loading-section" style="display: none;">
                <div class="loading-content">
                    <div class="spinner"></div>
                    <p class="loading-text">Processing your query...</p>
                    <div id="workflowSteps" class="workflow-steps"></div>
                </div>
            </div>

            <!-- Response Section -->
            <div id="responseSection" class="response-section" style="display: none;">
                <!-- Metadata Cards -->
                <div class="metadata-grid">
                    <div class="metadata-card">
                        <div class="metadata-icon route-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 16V8C20.9996 7.64928 20.9071 7.30481 20.7315 7.00116C20.556 6.69751 20.3037 6.44536 20 6.27L13 2.27C12.696 2.09446 12.3511 2.00205 12 2.00205C11.6489 2.00205 11.304 2.09446 11 2.27L4 6.27C3.69626 6.44536 3.44398 6.69751 3.26846 7.00116C3.09294 7.30481 3.00036 7.64928 3 8V16C3.00036 16.3507 3.09294 16.6952 3.26846 16.9988C3.44398 17.3025 3.69626 17.5546 4 17.73L11 21.73C11.304 21.9055 11.6489 21.9979 12 21.9979C12.3511 21.9979 12.696 21.9055 13 21.73L20 17.73C20.3037 17.5546 20.556 17.3025 20.7315 16.9988C20.9071 16.6952 20.9996 16.3507 21 16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="metadata-content">
                            <p class="metadata-label">Route Decision</p>
                            <p id="routeValue" class="metadata-value">-</p>
                        </div>
                    </div>

                    <div class="metadata-card">
                        <div class="metadata-icon source-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 19.5C4 18.837 4.26339 18.2011 4.73223 17.7322C5.20107 17.2634 5.83696 17 6.5 17H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6.5 2H20V22H6.5C5.83696 22 5.20107 21.7366 4.73223 21.2678C4.26339 20.7989 4 20.163 4 19.5V4.5C4 3.83696 4.26339 3.20107 4.73223 2.73223C5.20107 2.26339 5.83696 2 6.5 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="metadata-content">
                            <p class="metadata-label">Information Source</p>
                            <p id="sourceValue" class="metadata-value">-</p>
                        </div>
                    </div>

                    <div class="metadata-card">
                        <div class="metadata-icon relevance-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M22 11.08V12C21.9988 14.1564 21.3005 16.2547 20.0093 17.9818C18.7182 19.709 16.9033 20.9725 14.8354 21.5839C12.7674 22.1953 10.5573 22.1219 8.53447 21.3746C6.51168 20.6273 4.78465 19.2461 3.61096 17.4371C2.43727 15.628 1.87979 13.4881 2.02168 11.3363C2.16356 9.18455 2.99721 7.13631 4.39828 5.49706C5.79935 3.85781 7.69279 2.71537 9.79619 2.24013C11.8996 1.7649 14.1003 1.98232 16.07 2.85999" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 4L12 14.01L9 11.01" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="metadata-content">
                            <p class="metadata-label">Context Relevance</p>
                            <p id="relevanceValue" class="metadata-value">-</p>
                        </div>
                    </div>
                </div>

                <!-- Response Card -->
                <div class="response-card card">
                    <h3 class="response-title">Response</h3>
                    <div id="responseContent" class="response-content"></div>
                </div>

                <!-- Workflow Visualization -->
                <div class="workflow-card card">
                    <h3 class="workflow-title">Workflow Execution</h3>
                    <div id="workflowVisualization" class="workflow-visualization"></div>
                </div>
            </div>

            <!-- Error Section -->
            <div id="errorSection" class="error-section" style="display: none;">
                <div class="error-content">
                    <svg class="error-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                        <path d="M12 8V12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        <path d="M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <h3 class="error-title">Error</h3>
                    <p id="errorMessage" class="error-message"></p>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Powered by Deera</p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

